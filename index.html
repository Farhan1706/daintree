<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/css/style.css"/>
    <!-- <script src="/js/script.js"></script> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Daintree Website</title>
</head>
<body>
    
    <!-- TAMPILAN AWAL -->
    <div class="container">
        <figure class="text-center">
            <blockquote class="blockquote" style="margin-top: 400px;">
              <h1 class="display-1" >Hello!...</h1>
            </blockquote>
            <figcaption class="blockquote-footer" style="margin-bottom: 400px;">
              This's Daintree Website
            </figcaption>
        </figure>
    </div>

    <!-- OUR MEMBERS -->
    <table class="table-borderless text-center table-fade-in">
       
        <tbody id="memberTableBody">
            <!-- Data dari API ditambahkan di sini dari js -->
        </tbody>
    </table>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    var table = document.querySelector('.table-fade-in');
    var hasTableFaded = false;

    function isInViewport(element) {
        var rect = element.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
        );
    }
   

    function handleScroll() {
        if (isInViewport(table) && !hasTableFaded) {
            table.classList.add('fade-in');
            hasTableFaded = true;
            window.removeEventListener('scroll', handleScroll);
        }
    }

    window.addEventListener('scroll', handleScroll);

    // Fungsi untuk mengambil data dari API
    function fetchData() {
        const apiUrl = 'https://daintree-eight.vercel.app/api';
        fetch(apiUrl) // Ganti URL sesuai dengan URL API yang sesuai
            .then(response => response.json())
            .then(data => {
                // Memanggil fungsi untuk menambahkan data ke tabel
                populateTable(data.data);
            })
            .catch(error => console.error('Error fetching data:', error));
    }

    // Fungsi untuk menambahkan data ke tabel
    function populateTable(data) {
    var tableBody = table.querySelector('tbody');

    // hapus data yang sama kalau ada di tabel
    tableBody.innerHTML = '';

    // buat satu baris untuk semua data anggota kelompok
    var row = tableBody.insertRow();

    data.forEach(member => {
        // tambah sel untuk setiap kolom
        var cell = row.insertCell();
        cell.innerHTML = '<img src="/img/' + member.id + '.png"/><h5><b>' + member.nama + '</b></h5><p><b>' + member.provinsi + '</b></p><p>' + member.kota + '</p><p>' + member.kecamatan + '</p><p>' + member.desa + '</p>';
    });

    // tambah kelas fade-in ke tabel setelah data ditambahkan
    table.classList.add('fade-in');
    }
   
    // panggil fungsi
    fetchData();
    handleScroll();
});
</script>
</html>